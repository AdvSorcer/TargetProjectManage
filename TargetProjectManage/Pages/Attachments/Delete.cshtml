@page "{id:int}"
@model TargetProjectManage.Pages.Attachments.DeleteModel
@{
    ViewData["Title"] = "刪除附件";
}

@if (Model.CurrentProject != null)
{
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="bi bi-trash me-2 text-danger"></i>刪除附件</h1>
        <a asp-page="Index" asp-route-projectId="@Model.CurrentProject.Id" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i>返回附件清單
        </a>
    </div>
}
else
{
    <div class="text-center py-5">
        <i class="bi bi-exclamation-triangle display-1 text-warning"></i>
        <h3 class="text-muted mt-3">找不到該附件</h3>
        <a asp-page="/Projects/Index" class="btn btn-primary">返回專案列表</a>
    </div>
    return;
}

<div class="alert alert-danger" role="alert">
    <h4 class="alert-heading">確認刪除</h4>
    <p>您確定要刪除此附件嗎？檔案將從系統中移除，此操作無法復原。</p>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0">
                    <i class="bi bi-file-earmark me-2"></i>@Model.Attachment.OriginalFileName
                </h5>
            </div>
            <div class="card-body">
                @if (!string.IsNullOrEmpty(Model.Attachment.Category))
                {
                    <p><strong>類別:</strong> <span class="badge bg-secondary">@Model.Attachment.Category</span></p>
                }
                @if (!string.IsNullOrEmpty(Model.Attachment.Description))
                {
                    <p><strong>說明:</strong> @Model.Attachment.Description</p>
                }
                <p class="text-muted"><strong>上傳時間:</strong> @Model.Attachment.UploadedAt.ToString("yyyy/MM/dd HH:mm")</p>
            </div>
        </div>

        <form method="post" class="mt-4">
            <input type="hidden" asp-for="Attachment.Id" />
            <input type="hidden" asp-for="Attachment.ProjectId" />
            <div class="d-flex justify-content-end gap-2">
                <a asp-page="Index" asp-route-projectId="@Model.CurrentProject!.Id" class="btn btn-secondary">取消</a>
                <button type="submit" class="btn btn-danger">
                    <i class="bi bi-trash me-1"></i>確認刪除
                </button>
            </div>
        </form>
    </div>
</div>
